<%#
name: Update Packages by search query - Katello Script Default
snippet: false
template_inputs:
- name: Packages search query
  required: false
  input_type: user
  description: Filter criteria for packages to be updated.
  advanced: false
  value_type: plain
  hidden_value: false
- name: Selected update versions
  required: false
  input_type: user
  description: JSON string of selected package versions to be updated, in the format
    [ nvra ]. Leave blank to upgrade to latest available version.
  advanced: false
  value_type: plain
  hidden_value: false
model: JobTemplate
job_category: Katello
description_format: Update package(s) %{Packages search query}
provider_type: script
kind: job_template
organizations:
- Ceph
- Management
- OKD
locations:
- Default Location
%>

<% package_names = @host.package_names_for_job_template(
  action: 'update',
  search: input('Packages search query'),
  versions: input('Selected update versions')
) -%>

<%= render_template('Package Action - Script Default', :action => 'update', :package => package_names.join(' ')) %>